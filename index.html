<!DOCTYPE html>
<html>
<head>
  
  <meta charset="UTF-8">
  <title>Seavo Nautiq</title>
  <link rel="stylesheet" href="style.css">

  
  <style>
    
    body {
        background-color: hsl(210, 100%, var(--bg-lightness));
        transition: background-color 0.5s ease;
        margin: 0;
        font-family: 'Merriweather Sans', sans-serif;
        overflow-x: hidden;
    }

    @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Merriweather+Sans&display=swap');

h1 {
  font-family: 'Cinzel', serif;
  letter-spacing: 1px;
}

h2 {
  font-family: 'merriweather sans', sans-serif;
  letter-spacing: 1px;
}

h3 {
  font-family: 'merriweather sans', sans-serif;
  letter-spacing: 1px;
}

    body::before {
     content: "";
     position: fixed;
     inset: 0;
     pointer-events: none;
     background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.7));
     z-index: -1;
  }

  :root {
    --bg-lightness: 20%;
    --text-color: hsl(0, 0%, calc(100% - var(--bg-lightness)));
    --box-color: hsl(210, 50%, calc(var(--bg-lightness) + 5%));
    --button-color: hsl(210, 70%, calc(var(--bg-lightness) + 10%));
    --button-text: hsl(0, 0%, calc(100% - var(--bg-lightness)));
  }


  .theme-slider-container {
    position: relative;
    top: 20px;
    background: rgba(0, 0, 0, 0.6);
    padding: 5px 15px;
    border-radius: 12px;
    border: 2px solid #8f8248;
    color: white;
    font-family: Arial, sans-serif;
    z-index: 1000;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    width: 160px;
    margin-left: 50px;
  }

  .theme-slider-container input[type="range"] {
    width: 100px;
    cursor: pointer;
  }

  

  .video-header {
  position: relative;
  aspect-ratio: 1280 / 99; /* behold riktig proporsjon */
  overflow: hidden;
  background-color: #000; /* fallback bakgrunn */
}


.video-header video {
  width: 100%;
  height: 200%;
  object-fit: cover;
  display: block;
}

.hoved-rad {
  display: flex;
  align-items: flex-start;
  gap: 30px;
  padding: 30px;
  flex-wrap: wrap;
}



.seavo-wrapper {
  flex: 1;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: 40px;
  padding-left: 0px;
  margin: 20px 20px;
  
}

.seavo-left {
  flex: 1 1 50%;
  display: flex;
  flex-direction: column;
  gap: 40px;
}

.seavo-left h1 {
  color: #7ddbf3;
  margin: 0;
  font-size: 2rem;
  font: 2em "Arial", ;
}

 #forsidebilde {
  width: 100%;
  max-width: 400px;
  border-radius: 20px;
  box-shadow: #000000 0px 0px 10px 3px;
 
}


.seavo-right {
  flex: 1 1 40%;
  display: flex;
  flex-direction: column;
  gap: 30px;
}




.toggle-btn {
  bottom: 8px;
  right: 6px;
  background-color: rgba(0, 140, 255, 0.8);
  color: white;
  border: none;
  padding: 5px 10px;
  font-size: 14px;
  border-radius: 8px;
  cursor: pointer;
}



  .forsidebilde2 {
     width: 100%;
     height: 100%;
     position: absolute;
     top: 0;
     left: 0;
     z-index: -1;
     opacity: 0.1;
     pointer-events: none;
    }


   .language-selector{ position:relative; z-index:1100; margin: -56px; float:right; margin-right: 45px; }
   .language-button{ display:flex; align-items:center; gap:8px; padding:10px 16px; border-radius:10px; border:1px solid rgba(255,255,255,.18); background:rgba(0,0,0,.25); color:#ffffff; cursor:pointer;}
   .language-button:hover{ filter:brightness(1.15); }
   .flag{ width:20px; height:14px; object-fit:cover; border-radius:2px; }
   .language-dropdown{ position:absolute; top:100%; right: 5px; min-width:180px; background:rgba(8,22,38,.96); border:1px solid rgba(255,255,255,.12); border-radius:10px; box-shadow:0 10px 26px rgba(0,0,0,.4); display:none; padding:6px; }
   .language-dropdown.open{ display:block; }
   .language-dropdown > div{ display:flex; align-items:center; gap:10px; padding:8px 10px; border-radius:8px; cursor:pointer; color:#fff; }
   .language-dropdown > div:hover{ background:rgba(255,255,255,.08); }




    .gradient-overgang {
      height: 10px;
      background: linear-gradient(to left, #62b2e7, #001125);
      box-shadow: 6px 4px 6px rgba(0, 0, 0, 0.7);
    }


   .container-wrapper {
     display: flex;
     align-items: flex-start;
     gap: 20px; /* juster avstanden her */
     padding: 30px;
   }

    .venstre-container {
      width: 250px;
      height: 450px;
      background: linear-gradient(to left, #12315c67, #215db16c);
      border-radius: 40px;
      box-shadow: 6px 6px 6px rgba(0, 0, 0, 0.6);
      padding: 20px;
      margin-top: 5px;
      opacity: 0.7;
    }


    .ny-container {
      margin-top: 20px;
      margin-left: -20px;
      width: 250px;
      height: 390px;
      padding: 20px;
      background: linear-gradient(to left, #12315c77, #215db17a); 
      border-radius: 40px;
      box-shadow: 6px 6px 6px rgba(0,0,0,0.6);
    }  
   
    .top-container {
      display: flex;
      justify-content: center;
      align-items: center;     
      text-align: center;
      height: 20px;
      width: 250px;
      padding: 20px;
      background: linear-gradient(to right, #1e3a5f7c, #326fa880);
      border-radius: 40px;
      color: white;
      box-shadow: 6px 6px 6px rgba(0,0,0,0.6);
      opacity: 0.7;
    }

    
    .hoyre-container {
      width: 250px;
      height: 280px;
      background: linear-gradient(to left, #12315c7c, #215db17a);
      border-radius: 40px;
      box-shadow: 6px 6px 6px rgba(0,0,0,0.6);
      padding: 20px;
      margin-top: 20px;
      opacity: 0.7;
    }

    .activity-container {
      width: 350px;
      height: 460px;
      background: linear-gradient(to left, #12315c7c, #215db17a);
      border-radius: 40px;
      box-shadow: 6px 6px 6px rgba(0,0,0,0.6);
      padding: 20px;
      margin-top: 60px;
      margin-left: 0px;
      opacity: 0.7;
    }


    .widget {
  background: rgba(0, 30, 70, 0.85);
  padding: 10px 14px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  width: 93%;
  margin-bottom: 25px;
  backdrop-filter: blur(4px);
}

.widget h3 {
  margin: 0 0 10px 0;
  font-size: 18px;
  text-align: center;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
}

.reminder-item {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 6px 0;
  font-size: 16px;
  color: #ffffff;
}

.dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  flex-shrink: 0;
  box-shadow: 0 0 0 2px rgba(255,255,255,.08) inset;
}
.dot.yellow { background-color: #ecc543; }
.dot.red    { background-color: #f03747; }

.badge {
  min-width: 22px;
  height: 20px;
  padding: 0 6px;
  border-radius: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
  background: rgba(255,255,255,.14);
  color: #ffffff;
  line-height: 1;
}

.activity-box .subtle {
  color: rgba(255, 255, 255, 0.904);
  font-size: 12px;
  text-align: center;
  margin-top: -6px;
  margin-bottom: 8px;
}

.activity-list {
  max-height: 225px;
  overflow-y: auto;
  padding-right: 4px;
}

.activity-item {
  padding: 8px 10px;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 10px;
  background: rgba(255,255,255,.04);
  margin-bottom: 8px;
  font-size: 14px;
  color: #ffffff;
}




    .venstre-container button,
    .hoyre-container button {
     background: linear-gradient(to left, #688fc5d5, #133a70c7);
      color: #000000;
      border-radius: 12px;
      border: color(srgb 255 0 0 );
      width: 250px;
      height: 40px;
      font-family: 'Arial', sans-serif;
      font-size: 22px;
      font-weight: bold;
      
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.7);
      transition: background-color 0.3s ease;
      margin-bottom: 18px; 
      position: relative;
    }

    
    .venstre-container button:hover,
    .hoyre-container button:hover {
      background: #97b4d3;
      filter: brightness(1.1);
      transform: scale(1.05);
    }




  .digital-clock-container {
  width:150px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.5);
  
  
  border: 2px solid #8f8248;
  font-family: 'Courier New', Courier, monospace;
  text-align: center;
  
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
  margin: 0 auto;
  margin-top: 40px;
}

.time {
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 10px;
  color: #ffffff;
}

.date {
  font-size: 1.0rem;
  color: #b0ffb0;
  letter-spacing: 1px;
}

   

    h2, h3 {
      margin-top: 5px;
      margin-bottom: 10px;
      margin-left: 10px;
      color: #7ddbf3;
    }




@media (orientation: landscape) and (max-width: 812px) {
 
  .container {
    padding: 5px;
    font-size: 0.9rem;
  }
}

@media screen and (max-width: 812px) and (orientation: landscape) {
  body {
    font-size: 0.9rem;
  }

  #mobilpicture {
    margin: 10px auto;
  
  }

  .seavo-wrapper {
    flex-direction: column;
    padding: 10px;
  }
}

 @media (max-width: 768px) {
  table, thead, tbody, th, td, tr {
    display: block;
  }
}

    /* overlay vises */
body.sn-locked { overflow: hidden; }


#snRegOverlay {
position: fixed; inset: 0; z-index: 9999;
display: none; /* vises via JS om ikke registrert */
background: rgba(0,0,0,.55);
backdrop-filter: blur(2px);
}
#snRegOverlay.show { display: grid; place-items: center; }


.sn-modal {
width: min(880px, 92vw);
background: rgba(12, 25, 48, .92);
border: 1px solid rgba(255,255,255,.12);
border-radius: 16px;
box-shadow: 0 12px 36px rgba(0,0,0,.5);
color: #fff;
padding: 18px 18px 12px;
}

#btn-info {
  background: linear-gradient(to right, #1b75d1, #0e3e86);
  color: #7de1ff;
  padding: 16px;
  border-radius: 12px;
  font-size: 18px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  margin-bottom: 12px;
}


#btn-info:hover {
  background: linear-gradient(to right, #0e3e86, #1b75d1);
  color: #a0d8ff;
}

.sn-head { background: linear-gradient(to right,#1b75d1,#0e3e86); padding: 14px 16px; border-radius: 12px; margin-bottom: 12px; }
.sn-head h2 { margin: 0; }


.sn-grid { display: grid; gap: 12px; grid-template-columns: 1fr 1fr; }
.sn-row { display: grid; gap: 10px; }


.sn-field label{ font-size: 16px; color: #bcd3f1; display:block; margin-bottom:6px; }
.sn-field input, .sn-field select {
width: 95%; padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,.15);
background: rgba(0,0,0,.25); color:#fff;
}

.h6 {
  font-size: 1.2rem;
  color: #418a3b;
  margin-left: 548px;
}

.sn-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 8px; }
.sn-btn { cursor: pointer; padding: 10px 14px; border-radius: 10px; border: 0; font-weight: bold; }
.sn-btn-primary { background: #62b2e7; color: #001125; }
.sn-btn-ghost { background: transparent; border: 1px solid #62b2e7; color: #fff; }


.sn-sub { color:#bcd3f1; font-size: 13px; }
.sn-row-terms { display:flex; align-items:center; gap:8px; margin-top:6px; }


@media (max-width: 720px){ .sn-grid{ grid-template-columns: 1fr; } }

  </style>
 

</head>
<body>

  



<header class="video-header">
  <video autoplay muted loop playsinline disablePictureInPicture>
    <source src="Video/Ocean-Seavo-Nautiq.mp4" type="video/mp4">
 </video>
</header>



  
  <div class="language-selector">
  <button class="language-button" onclick="toggleDropdown()" id="language-btn" aria-haspopup="true" aria-expanded="false">
    <img src="https://flagcdn.com/w40/gb.png" class="flag" id="selected-flag" alt="">
    <span id="selected-lang-label" data-i18n="lang.name">English</span>
  </button>

  <div class="language-dropdown" id="language-dropdown" role="menu">
    <div onclick="selectLanguage('en','gb')" role="menuitem"><img src="https://flagcdn.com/w40/gb.png" class="flag" alt=""><span data-i18n="lang.en">English</span></div>
    <div onclick="selectLanguage('no','no')" role="menuitem"><img src="https://flagcdn.com/w40/no.png" class="flag" alt=""><span data-i18n="lang.no">Norwegian</span></div>
    <div onclick="selectLanguage('is','is')" role="menuitem"><img src="https://flagcdn.com/w40/is.png" class="flag" alt=""><span data-i18n="lang.is">Íslenska</span></div>
    <div onclick="selectLanguage('ru','ru')" role="menuitem"><img src="https://flagcdn.com/w40/ru.png" class="flag" alt=""><span data-i18n="lang.ru">Russian</span></div>
    <div onclick="selectLanguage('zh','cn')" role="menuitem"><img src="https://flagcdn.com/w40/cn.png" class="flag" alt=""><span data-i18n="lang.zh">Chinese</span></div>
    <div onclick="selectLanguage('es','es')" role="menuitem"><img src="https://flagcdn.com/w40/es.png" class="flag" alt=""><span data-i18n="lang.es">Spanish</span></div>
    <div onclick="selectLanguage('pt','pt')" role="menuitem"><img src="https://flagcdn.com/w40/pt.png" class="flag" alt=""><span data-i18n="lang.pt">Portuguese</span></div>
  </div>
</div>


    <div class="gradient-overgang"></div>
<div id="snTrialBanner" style=" color:#05cafcb2; padding:6px 10px; text-align:center"></div>




<div class="hoved-rad">
  <!-- Venstre container -->
 <div class="venstre-container">
  <button onclick="window.open('office.html', '_blank')"><span data-i18n="nav.office">Office</span></button>
  <button onclick="window.open('equipment.html', '_blank')"><span data-i18n="nav.equipment">Equipment</span></button>
  <button onclick="window.open('Parts and tools.html', '_blank')"><span data-i18n="nav.partsTools">Parts & tools</span></button>
  <button onclick="window.open('provisions.html', '_blank')"><span data-i18n="nav.provisions">Provisions</span></button>
  <button onclick="window.open('medicine.html', '_blank')"><span data-i18n="nav.medicine">Medicine</span></button>
  <button onclick="window.open('safety.html', '_blank')"><span data-i18n="nav.safety">Safety</span></button>
  <button onclick="window.open('supplies.html', '_blank')"><span data-i18n="nav.supplies">Supplies</span></button>
  <button onclick="window.open('disposal.html', '_blank')"><span data-i18n="nav.disposal">Disposal</span></button>

  <div class="ny-container">
    <button onclick="åpnePopup9()"><img src="icon/Cargo.png" alt="info" style="height: 32px; vertical-align: middle; float: left;"> <span data-i18n="nav.cargo">Cargo Space</span></button>
    <button onclick="åpnePopup8()"><img src="icon/Maintenance.png" alt="info" style="height: 32px; vertical-align: middle; float: left;"> <span data-i18n="nav.maintenance">Maintenance</span></button>
    <button onclick="åpnePopup3()"><img src="icon/Order-black.png" alt="Info" style="height: 32px; vertical-align: middle; float: left;"> <span data-i18n="nav.orders">Orders</span></button>
    <button onclick="åpnePopup()"><img src="icon/Participants.png" alt="Info" style="height: 32px; vertical-align: middle; float: left;"> <span data-i18n="nav.participants">Participants</span></button>
    <button onclick="åpnePopup5()"><img src="icon/Voyage.png" alt="Info" style="height: 32px; vertical-align: middle; float: left;"> <span data-i18n="nav.voyages">Voyages</span></button>
    <button onclick="åpnePopup6()"><img src="icon/Fleet.png" alt="Info" style="height: 32px; vertical-align: middle; float: left;"> <span data-i18n="nav.fleet">Fleet</span></button>
    <button onclick="åpnePopup12()"><img src="icon/Research.png" alt="Info" style="height: 32px; vertical-align: middle; float: left;"> <span data-i18n="nav.research">Research</span></button>
  </div>
</div>



  

  <!-- Midtseksjon -->
  <div class="seavo-wrapper">
    <div class="seavo-left">
      <h1 data-i18n="index.welcomeTitle">Welcome to Seavo Nautiq</h1>

      <img src="images/Animasjon.gif" alt="forsidebilde" id="forsidebilde">
    </div>


    




 <div class="seavo-right">


  <div class="activity-container">

    
  <!-- Reminders -->
<div class="widget" aria-label="Reminders" data-i18n-aria="index.remindersAria">
  <h3 data-i18n="index.remindersTitle">Reminders</h3>

  <div class="reminder-item">
    <span class="dot yellow"></span>
    <span class="label" data-i18n="index.invExp9">Inventory expires in 9 days</span>
    <span class="badge" id="invYellowCount">0</span>
  </div>

  <div class="reminder-item">
    <span class="dot red"></span>
    <span class="label" data-i18n="index.invExp3">Inventory expires in 3 days</span>
    <span class="badge" id="invRedCount">0</span>
  </div>

  <div class="reminder-item">
    <span class="dot yellow"></span>
    <span class="label" data-i18n="index.taskExp9">Tasks expire in 9 days</span>
    <span class="badge" id="taskYellowCount">0</span>
  </div>

  <div class="reminder-item">
    <span class="dot red"></span>
    <span class="label" data-i18n="index.taskExp3">Tasks expire in 3 days</span>
    <span class="badge" id="taskRedCount">0</span>
  </div>
</div>

<div class="widget activity-box" aria-label="Recent Activity" data-i18n-aria="index.recentAria">
  <h3 data-i18n="index.recentTitle">Recent Activity</h3>
  <div class="subtle" data-i18n="index.scrollable">Scrollable</div>
  <div class="activity-list"></div>
</div>

  </div>
  </div>
    </div>
  


  <!-- Høyre kolonne -->
  <div class="hoyre-kolonne">
    <div class="top-container">

      <div id="vesselBadge" style="
        margin:12px 0; padding:10px 14px; border-radius:12px;
        background:rgba(0,0,0,.18); border:1px solid rgba(255,255,255,.12);
        color:#ffffff; font-weight:bold; display:inline-block;">
        <span data-i18n="index.vesselBadgePlaceholder">Vessels name and call sign</span>
    </div>
    </div>
    

    <div class="hoyre-container">

  <button onclick="åpnePopup4()"><img src="icon/info.png" alt="Info" style="height: 32px; vertical-align: middle; float: left;"><span data-i18n="nav.help">Help</span></button>
  <button onclick="åpnePopup2()"><img src="icon/Doc-black.png" alt="Info" style="height: 32px; vertical-align: middle; float: left;"><span data-i18n="nav.documents">Documents</span></button>
  <button><img src="icon/Share-black.png" alt="Info" style="height: 32px; vertical-align: middle; float: left;"><span data-i18n="nav.shared">Shared content</span></button>
  <button onclick="åpnePopup7()"><img src="icon/Settings.png" alt="Info" style="height: 32px; vertical-align: middle; float: left;"><span data-i18n="nav.settings">Settings</span></button>
  <button id="btnSignOut"><img src="icon/Sign out.png" style="height:32px; vertical-align:middle; float:left;"><span data-i18n="nav.signOut">Sign out</span></button>
</div>


    

      <div class="theme-slider-container">
        <label for="themeSlider" data-i18n="index.themeLight">☀️</label>
      <input type="range" min="1" max="13" value="10" id="themeSlider">
      <label for="themeSlider" data-i18n="index.themeDark">🌙</label>

      </div>

    <div class="digital-clock-container">
      <div class="time" id="time">--:--:--</div>
      <div class="date" id="date">--.--.--</div>
    </div>
  </div>
</div>

 

<div>
  <img src="images/Picture_collection.png" class="forsidebilde2" alt="forsidebilde2">
  </div>


</div>
</main>

<!-- Registrerings‑overlay -->
<div id="snRegOverlay" aria-modal="true" role="dialog">
  <div>
      <button onclick="åpnePopup10()" id="btn-info">What is Seavo Nautiq?</button>

  <div class="sn-modal" role="document">
    <div class="sn-head"><h2>Register Seavo Nautiq user</h2></div>
    <p class="sn-sub">Enter your personal details and vessel information. Enjoy a 1-month free trial—then your chosen plan begins.</p>

    <div class="sn-grid">
      <div class="sn-row">
        <div class="sn-field">
          <label>Full name *</label>
          <input id="snFullName" autocomplete="name" placeholder="First name Last name" />
        </div>
        <div class="sn-field">
          <label>Email *</label>
          <input id="snEmail" type="email" autocomplete="email" placeholder="you@example.com" />
        </div>
        <div class="sn-field">
          <label>Phone (optional)</label>
          <input id="snPhone" type="tel" autocomplete="tel" placeholder="" />
        </div>
      </div>

      <div class="sn-row">
        <div class="sn-field">
          <label>Vessel name *</label>
          <input id="snVesselName" placeholder="M/V Seavo Nautiq" />
        </div>
        <div class="sn-field">
          <label>Call sign (optional)</label>
          <input id="snCallSign" placeholder="LABC" />
        </div>
        <div class="sn-field">
          <label>Language *</label>
          <select id="snLanguage">
            <option value="English">English</option>
            <option value="Norsk">Norsk</option>
            <option value="Íslenska">Íslenska</option>
            <option value="Español">Español</option>
            <option value="Português">Português</option>
            <option value="Русский">Русский</option>
            <option value="中文">中文</option>
          </select>
        </div>
      </div>
    </div>

    <div class="sn-row" style="margin-top:25px;">
      <div class="sn-field">
        <label>Subscription * <style>label { font-weight: bold; }</style></label>
       
        <div>
          <label style="display:flex; align-items:center; gap: 8px; margin-bottom:18px;">
            <input type="radio" name="snPlan" value="monthly" checked style="margin-right: -300px;"> Monthly (1 month free, price 29.37 GBP)
          </label>
           <div class="h6">
        <h6>10% discount for annual subscription</h6>
      </div>
          <label style="display:flex; align-items:center; gap:8px;">
            <input type="radio" name="snPlan" value="annual" style="margin-right: -300px;"> Annual (1 month free, price 317.17 GBP)
          </label>
        </div>
      </div>
    </div>

    <div class="sn-row-terms">
      <input id="snTerms" type="checkbox"> <label for="snTerms" class="sn-sub">I accept the terms of use & privacy policy.</label>
    </div>

    <div class="sn-actions">
      <button class="sn-btn sn-btn-ghost" id="snCancelReg">Cancel</button>
      <button class="sn-btn sn-btn-primary" id="snSubmitReg">Start free trial</button>
    </div>
  </div>
</div>


  <script src="js/i18n.translations.js"></script>
  <script src="js/i18n.core.js"></script>



</head>


 





<!-- Kjerne – må lastes før init -->
<script src="./js/seavo-core.js" defer></script>

<script>
  document.getElementById('btnSignOut')?.addEventListener('click', () => {
    if(!confirm('Reset registration on this device?')) return;
    // “Soft reset”: beholder flåter og userId (sesjon)
    SN.clearRegistration({ keepFleets: true, keepSession: true });
    location.reload(); // overlayet vil dukke opp igjen
  });

   function updateVesselBadge(){
    const badge = document.getElementById('vesselBadge');
    if(!badge) return;
    const v = getVessel();
    if(!v || !v.vesselName){
      badge.textContent = t('index.vesselBadgePlaceholder','Vessels name and call sign');
      return;
    }
    const parts = [v.vesselName];
    if (v.callSign) parts.push(formatCallSign(v.callSign));
    badge.textContent = parts.join(' • ');
  }

   // Kall etter applyLanguage / ved load
  document.addEventListener('DOMContentLoaded', () => {
    updateVesselBadge();
    applyTranslations(document);
  });
  window.addEventListener('storage', (e)=>{ if(e.key==='SN_vessel') updateVesselBadge(); });
</script>




<script>
  // 1) Oppdater Reminders fra store
  function refreshReminders(){
    const inv = seavo.countInventoryAlerts();
    const task = seavo.countTaskAlerts();
    document.getElementById('invYellowCount').textContent = inv.yellow;
    document.getElementById('invRedCount').textContent    = inv.red;
    document.getElementById('taskYellowCount').textContent= task.yellow;
    document.getElementById('taskRedCount').textContent   = task.red;
  }

  // 2) Last Recent Activity (vis f.eks. siste 20)
  function renderActivity(){
    const box = document.querySelector('.activity-list');
    const store = seavo.getStore();
    const rows = (store.activity||[]).slice(0,20).map(e=>{
      const time = new Date(e.tsISO).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
      const src  = e.source ? ` <span style="opacity:.7">– ${e.source}</span>` : '';
      return `<div class="activity-item">[${time}] ${e.text}${src}</div>`;
    }).join('');
    box.innerHTML = rows || '<div class="activity-item" style="opacity:.7">No recent activity</div>';
  }

  // 3) Init + live-oppdateringer
  function initIndex(){
    refreshReminders();
    renderActivity();
    seavo.onUpdate(()=>{
      refreshReminders();
      renderActivity();
    });
  }

  document.addEventListener('DOMContentLoaded', initIndex);
</script>


<!-- Init/binding – kjører når DOM er klar og kjerne er lastet -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  // Trial banner (valgfritt)
  (function renderTrialBanner(){
    const b = document.getElementById('snTrialBanner'); if(!b) return;
    const s = getSub(); if(!s) return;
    const { inTrial, daysLeft, trialEnd } = getTrialStatus();
    if(inTrial){
      b.style.display='block';
      b.textContent = `Free trial active – ${daysLeft} day(s) left (ends ${trialEnd.toLocaleDateString()})`;
    }
  })();

  // Gate + handlers
  (function initRegistrationGate(){
    const overlay = document.getElementById('snRegOverlay');
    if(!overlay){ console.warn('snRegOverlay not found'); return; }

    const fName = document.getElementById('snFullName');
    const email = document.getElementById('snEmail');
    const phone = document.getElementById('snPhone');
    const vName = document.getElementById('snVesselName');
    const cSign = document.getElementById('snCallSign');
    const lang  = document.getElementById('snLanguage');
    const terms = document.getElementById('snTerms');

    function show(){ overlay.classList.add('show'); document.body.classList.add('sn-locked'); prefill(); }
    function hide(){ overlay.classList.remove('show'); document.body.classList.remove('sn-locked'); }

    function prefill(){
      const u = getUser();
      const v = getVessel();
      if(u){ fName.value = u.fullName||''; email.value=u.email||''; phone.value=u.phone||''; lang.value=u.language||lang.value; }
      if(v){ vName.value = v.vesselName||''; cSign.value=v.callSign||''; if(!u) lang.value = v.language||lang.value; }
    }

    function currentPlan(){ return (document.querySelector('input[name="snPlan"]:checked')?.value)||'monthly'; }

    function validate(){
      if(!fName.value.trim()) return alert('Full name is required'), false;
      if(!/.+@.+\..+/.test(email.value.trim())) return alert('Valid email required'), false;
      if(!vName.value.trim()) return alert('Vessel name is required'), false;
      if(!terms.checked) return alert('You must accept the terms.'), false;
      return true;
    }

    // Vis overlay hvis ikke registrert
    if(!isRegistered()){
      show();
    } else {
      const u = getUser();
      applyLanguage(u?.language || getVessel()?.language || 'English');
    }

    // Knapper
    document.getElementById('snCancelReg').addEventListener('click', ()=>{ if(confirm('Cancel registration?')) hide(); });

    document.getElementById('snSubmitReg').addEventListener('click', ()=>{
      if(!validate()) return;

      const u = {
        fullName: fName.value.trim(),
        email: email.value.trim(),
        phone: phone.value.trim()||undefined,
        language: lang.value,
        createdAtISO: new Date().toISOString()
      };
      setUser(u);

      registerVessel({
        vesselName: vName.value.trim(),
        callSign: cSign.value.trim(),
        language: lang.value
      });

      if(!getSub()) setSub({ plan: currentPlan(), trialStartISO: new Date().toISOString() });
      else setSub({ ...getSub(), plan: currentPlan(), trialStartISO: getSub().trialStartISO || new Date().toISOString() });

      applyLanguage(lang.value);

      const badge = document.getElementById('vesselBadge');
      const v = getVessel();
      if(badge && v){ badge.textContent = `${v.vesselName} • ${formatCallSign(v.callSign||'')} (${v.language})`; }

      hide();
      alert('Registration saved. Your free trial has started.');
    });
  })();
});
</script>


</body>

          

</script>


    <script>
      function visInfoTekst() {

  document.getElementById("bildevisning").style.display = "none";
  document.getElementById("info-text-utenfor").style.display = "block";

  
  document.getElementById("infoBtn").classList.add("aktiv-knapp");
}

function endreBilde(bildefil) {
  document.getElementById("bildevisning").style.display = "block";
  document.getElementById("info-text-utenfor").style.display = "none";

  document.getElementById('visningsbilde').src = bildefil;

 
  document.getElementById("infoBtn").classList.remove("aktiv-knapp");
}

  
  window.onload = function() {
    visInfoTekst();
  };




function updateDigitalClock() {
  const now = new Date();

  const hours = now.getHours().toString().padStart(2, '0');
  const minutes = now.getMinutes().toString().padStart(2, '0');
  const seconds = now.getSeconds().toString().padStart(2, '0');

  const day = now.getDate().toString().padStart(2, '0');
  const month = (now.getMonth() + 1).toString().padStart(2, '0');
  const year = now.getFullYear().toString().slice(-2);

  document.getElementById("time").textContent = `${hours}:${minutes}:${seconds}`;
  document.getElementById("date").textContent = `${day}.${month}.${year}`;
}

setInterval(updateDigitalClock, 1000);
updateDigitalClock(); // første kall
</script>


<script>
  const themeSlider = document.getElementById('themeSlider');
  themeSlider.addEventListener('input', () => {
    const value = parseInt(themeSlider.value);
    const lightness = 100 - (value * 8); // 92% til 20%
    const textColor = lightness < 45 ? '#ffffff' : '#000000';
    const boxColor = `hsl(210, 50%, ${Math.max(lightness - 10, 15)}%)`;
    const buttonColor = `hsl(210, 70%, ${Math.max(lightness - 5, 20)}%)`;
    const buttonText = lightness < 45 ? '#ffffff' : '#000000';

    document.documentElement.style.setProperty('--bg-lightness', `${lightness}%`);
    document.documentElement.style.setProperty('--text-color', textColor);
    document.documentElement.style.setProperty('--box-color', boxColor);
    document.documentElement.style.setProperty('--button-color', buttonColor);
    document.documentElement.style.setProperty('--button-text', buttonText);
  });


     function åpnePopup() {
      window.open(
        'participants.html',    
        'popup',                  
        'width=1200,height=820'   
      );
    }

      function åpnePopup2() {
      window.open(
        'Documents.html',    
        'popup',                  
        'width=1400,height=650'   
      );
    }

       function åpnePopup3() {
      window.open(
        'Orders.html',    
        'popup',                  
        'width=1450,height=1200'   
      );
    }

       function åpnePopup4() {
      window.open(
        'Help.html',    
        'popup',                 
        'width=1600,height=1200'  
      );
    }

          function åpnePopup5() {
      window.open(
        'Voyages.html',    
        'popup',                  
        'width=1400,height=1200'   
      );
    }

              function åpnePopup6() {
      window.open(
        'Fleet.html',    
        'popup',                  
        'width=1400,height=800'  
      );
    }

                 function åpnePopup7() {
      window.open(
        'Settings.html',    
        'popup',                  
        'width=1400,height=800'  
      );
    }

                function åpnePopup8() {
      window.open(
        'Maintenance.html',    
        'popup',                  
        'width=1600,height=800'  
      );
    }

                  function åpnePopup9() {
      window.open(
        'Cargo.html',    
        'popup',                  
        'width=1900,height=1200'  
      );
    }

                      function åpnePopup10() {
      window.open(
        'Info.html',    
        'popup',                  
        'width=1600,height=1200'  
      );
    }

                          function åpnePopup12() {
      window.open(
        'Research.html',    
        'popup',                  
        'width=1600,height=1200'  
      );
    }

 


    (function renderTrialBanner(){
     const b = document.getElementById('snTrialBanner'); if(!b) return;
     const s = getSub(); if(!s) return;
     const { inTrial, daysLeft, trialEnd } = getTrialStatus();
     if(inTrial){ b.style.display='block'; b.textContent = `Free trial active – ${daysLeft} day(s) left (ends ${trialEnd.toLocaleDateString()})`; }
    })();




function getSession(){ return JSON.parse(localStorage.getItem(SN_KEYS.session) || '{}'); }
function setSession(upd){ localStorage.setItem(SN_KEYS.session, JSON.stringify({ ...getSession(), ...upd })); }


function getUser(){ return JSON.parse(localStorage.getItem(SN_KEYS.user) || 'null'); }
function setUser(u){ localStorage.setItem(SN_KEYS.user, JSON.stringify(u)); }


function getVessel(){ return JSON.parse(localStorage.getItem(SN_KEYS.vessel) || 'null'); }
function setVessel(v){ localStorage.setItem(SN_KEYS.vessel, JSON.stringify(v)); }


function getSub(){ return JSON.parse(localStorage.getItem(SN_KEYS.subscription) || 'null'); }
function setSub(s){ localStorage.setItem(SN_KEYS.subscription, JSON.stringify(s)); }


function getFleets(){ return JSON.parse(localStorage.getItem(SN_KEYS.fleets) || '{}'); }
function setFleets(f){ localStorage.setItem(SN_KEYS.fleets, JSON.stringify(f)); }


// --- Helpers ---
function isEmail(x){ return /.+@.+\..+/.test(x); }
function daysBetween(a,b){ const d=24*60*60*1000; return Math.floor((b-a)/d); }
function addDays(iso, n){ return new Date(new Date(iso).getTime() + n*86400000); }


// Trial: 30 dager fra trialStartISO
function getTrialStatus(){
const sub = getSub();
if(!sub?.trialStartISO) return { inTrial:false, daysLeft:0, trialEnd:null };
const now = new Date();
const end = addDays(sub.trialStartISO, 30);
const inTrial = now < end;
const daysLeft = Math.max(0, 30 - daysBetween(new Date(sub.trialStartISO), now));
return { inTrial, daysLeft, trialEnd:end };
}


function applyLanguage(lang){
// Enkel baseline – sett lang-attributt og lagre
// (Koble senere til faktisk i18n-tekster på siden)
document.documentElement.setAttribute('lang', lang || 'en');
}


function formatCallSign(cs){ return cs ? cs.toUpperCase() : ''; }


// --- Registration gate check ---
function isRegistered(){
const u = getUser();
const v = getVessel();
// Krav: navn + epost + fartøyets navn (kallesignal valgfritt)
return !!(u && u.fullName && isEmail(u.email) && v && v.vesselName);
}


// ===== (Fleet API fra tidligere beholdes uendret) =====
async function sha256Hex(text){
const enc = new TextEncoder().encode(text);
const buf = await crypto.subtle.digest('SHA-256', enc);
return [...new Uint8Array(buf)].map(b=>b.toString(16).padStart(2,'0')).join('');
}


async function createFleet(fleetName, pin){
const { userId } = getSession();
const pinHash = await sha256Hex(String(pin||''));
const fleetId = crypto.randomUUID();
const fleets = getFleets();
fleets[fleetId] = { fleetId, name: fleetName, pinHash, ownerUserId: userId, vessels: {}, voyages: {} };
setFleets(fleets);
setSession({ fleetId });
return fleets[fleetId];
}



(function initRegistrationGate(){
const overlay = document.getElementById('snRegOverlay');
const fName = document.getElementById('snFullName');
const email = document.getElementById('snEmail');
const phone = document.getElementById('snPhone');
const vName = document.getElementById('snVesselName');
const cSign = document.getElementById('snCallSign');
const lang = document.getElementById('snLanguage');
const terms = document.getElementById('snTerms');


function show(){ overlay.classList.add('show'); document.body.classList.add('sn-locked'); prefill(); }
function hide(){ overlay.classList.remove('show'); document.body.classList.remove('sn-locked'); }


function prefill(){
const u = getUser();
const v = getVessel();
if(u){ fName.value = u.fullName||''; email.value=u.email||''; phone.value=u.phone||''; lang.value=u.language||lang.value; }
if(v){ vName.value = v.vesselName||''; cSign.value=v.callSign||''; if(!u) lang.value = v.language||lang.value; }
}


function currentPlan(){ return (document.querySelector('input[name="snPlan"]:checked')?.value)||'monthly'; }


function validate(){
if(!fName.value.trim()) return alert('Full name is required'), false;
if(!/.+@.+\..+/.test(email.value.trim())) return alert('Valid email required'), false;
if(!vName.value.trim()) return alert('Vessel name is required'), false;
if(!terms.checked) return alert('You must accept the terms.'), false;
return true;
}


// Gate på load
if(!isRegistered()){ 
  show(); 
} else { 
  const u = getUser();
  applyLanguage(u?.language || getVessel()?.language || 'English');
  updateVesselBadge(); // <-- legg til
}

// Knappers logikk
document.getElementById('snCancelReg').addEventListener('click', ()=>{ if(confirm('Cancel registration?')) hide(); });


document.getElementById('snSubmitReg').addEventListener('click', ()=>{
if(!validate()) return;


const u = {
fullName: fName.value.trim(),
email: email.value.trim(),
phone: phone.value.trim()||undefined,
language: lang.value,
createdAtISO: new Date().toISOString()
};
setUser(u);


registerVessel({
vesselName: vName.value.trim(),
callSign: cSign.value.trim(),
language: lang.value
});


// Start gratis prøve hvis ikke satt
if(!getSub()) setSub({ plan: currentPlan(), trialStartISO: new Date().toISOString() });
else setSub({ ...getSub(), plan: currentPlan(), trialStartISO: getSub().trialStartISO || new Date().toISOString() });


applyLanguage(lang.value);


// Oppdater badge hvis finnes

  function updateVesselBadge(){
    const badge = document.getElementById('vesselBadge');
    if(!badge) return;
    const v = getVessel();
    if(!v || !v.vesselName){
      badge.textContent = 'Vessels name and call sign';
      return;
    }
    const parts = [v.vesselName];
    if (v.callSign) parts.push(formatCallSign(v.callSign));
    badge.textContent = parts.join(' • '); // <-- no language here
  }

  // Initialize on load and when SN_vessel changes (other tabs/windows)
  document.addEventListener('DOMContentLoaded', updateVesselBadge);
  window.addEventListener('storage', (e)=>{ if(e.key==='SN_vessel') updateVesselBadge(); });





hide();
alert('Registration saved. Your free trial has started.');
});
})();




</script>
</html>
